{"version":3,"sources":["services/icon-service.js","components/Item.js","components/Inventory.js","services/dialog-service.js","services/item-service.js","components/App.js","serviceWorker.js","index.js"],"names":["CURSE_ICONS","Object","keys","reactIcons","filter","k","startsWith","map","ICON_MAP","event","item","ctx","locked","GiLockedBox","GiNewspaper","person","emote","GiSkullMask","GiPerson","food","GiOpenedFoodCan","juice","GiWaterBottle","dino","GiBestialFangs","GiPawPrint","skeleton","aliveType","GiDinosaurBones","GiSkeleton","FaBone","curse","date","length","music","GiMusicSpell","Item","props","index","hasOwnProperty","preventSelfDrag","Icon","icon","type","findItemIconSync","draggableId","String","id","isDragDisabled","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","className","classNames","toLocaleDateString","style","marginTop","title","hasConsumed","consumeVerb","join","message","Inventory","name","items","inventories","alwaysScrollable","droppableId","droppableProps","background","height","overflowY","minHeight","i","key","placeholder","DIALOG","suspicious","friendly","sedated","findAllDialogs","a","Error","MONTHS","randomChance","rng","chance","double","randomElement","array","Math","abs","int32","randomInsert","elements","splice","randomDate","start","end","dateString","Date","toDateString","getCSV","url","Promise","resolve","reject","Papa","parse","download","header","skipEmptyLines","complete","result","data","rngPeople","seedrandom","peopleListsPromise","all","then","rows","suspiciousDialogs","friendlyDialogs","sedatedDialogs","row","singer","year","month","day","this","some","willConsume","onConsume","onView","includes","convertFriendly","yearGroupsPromise","noSkeleton","song","parts","flat","keyFn","getFullYear","reduce","r","x","push","dinosaursPromise","dinos","omnivore","diet","toLowerCase","carnivore","herbivore","toUpperCase","replace","period","preventDrag","skeletonIcon","indexOf","applyInventory","foods","juices","group","getDate","randomTimeWitch","unshift","randomPerson","randomFood","randomDino","people","getZodiac","getMonth","zodiac","rngCurse","update","delta","attackTimer","randomCurse","backpack","attackCt","liftDate","setDate","updateQueue","setInterval","updateDelta","keyTimeTravelTimeout","Boolean","window","location","hostname","match","ReactDOM","render","now","useState","timeTravelClass","setTimeTravelClass","setYear","setMonth","setDay","todayItems","setTodayItems","todayOverrides","setTodayOverrides","travelDate","travelDateString","findItemsByDate","today","FaDog","setInventories","contexts","entries","forEach","queryArray","undefined","queryAny","uid","allItems","consumableItems","other","sliders","slice","toString","padStart","onKeyDown","e","moveFocus","n","preventDefault","max","min","parseInt","target","element","document","getElementById","focus","keyCode","clearTimeout","setTimeout","Row","Col","sm","get","set","label","subtle","xs","opacity","value","onChange","onMouseDown","onMouseUp","onBlur","relatedTarget","onDragEnd","source","destination","list","startIndex","endIndex","Array","from","removed","reorder","assign","droppableSource","droppableDestination","sourceClone","destClone","move","md","navigator","serviceWorker","ready","registration","unregister","catch","error","console"],"mappings":"yYAeIA,EAAcC,OAAOC,KAAKC,GACzBC,QAAO,SAAAC,GAAC,OAAIA,EAAEC,WAAW,iBACzBC,KAAI,SAAAF,GAAC,OAAIF,EAAWE,MAErBG,EAAW,CACXC,MADW,SACLC,GACF,OAAGA,EAAKC,IAAIC,OACDC,KAEJC,MAEXC,OAPW,SAOJL,GACH,MAAkB,UAAfA,EAAKM,MACGC,KAEJC,MAEXC,KAbW,WAcP,OAAOC,MAEXC,MAhBW,WAiBP,OAAOC,OAEXC,KAnBW,SAmBNb,GACD,MAAsB,UAAfA,EAAKM,MAAoBQ,KAAiBC,MAErDC,SAtBW,SAsBFhB,GACL,MAA0B,SAAnBA,EAAKiB,UAAuBC,KACZ,WAAnBlB,EAAKiB,UAAyBE,KACxBC,MAEdC,MA3BW,SA2BLrB,GACF,OAAOV,GAAaU,EAAKsB,KAAOhC,EAAYiC,SAEhDC,MA9BW,WA+BP,OAAOC,OC3CA,SAASC,EAAKC,GAAQ,IAC5B3B,EAAe2B,EAAf3B,KAAM4B,EAASD,EAATC,MAEN1B,EAAUF,EAAKC,IAAfC,OAEFF,EAAK6B,eAAe,oBAAsB7B,EAAK8B,oBAC9C5B,GAAS,GAGb,IAAI6B,EDsCD,SAA0B/B,GAC7B,OAAOA,EAAKgC,OAASlC,EAAS+B,eAAe7B,EAAKiC,MAAQnC,EAASE,EAAKiC,MAAMjC,GAAQ,MCvC3EkC,CAAiBlC,GAE5B,OACI,kBAAC,IAAD,CAAWmC,YAAaC,OAAOpC,EAAKqC,IACzBT,MAAOA,EACPU,eAAgBpC,IACtB,SAACqC,EAAUC,GAAX,OACG,uCACIC,IAAKF,EAASG,UACVH,EAASI,eACTJ,EAASK,iBACb,yBAAKC,UAAU,QACX,yBACIA,UAAWC,IAAW,iEAAkE9C,EAAKM,MAAOJ,GAAU,WAC9G,wBAAI2C,UAAU,iDAAqE,iBAAb7C,EAAKsB,KAAmBtB,EAAKsB,KAAOtB,EAAKsB,MAAQtB,EAAKsB,KAAKyB,sBACjI,wBAAIF,UAAU,uBACTd,GAAQ,kBAACA,EAAD,CAAMc,UAAU,OAAOG,MAAO,CAACC,UAAW,YAClDjD,EAAKkD,OAETlD,EAAKmD,aACF,uBAAGN,UAAU,8CAA8C7C,EAAKoD,aAAe,MAA/E,IAAuFpD,EAAKmD,YAAYtD,KAAI,SAAAG,GAAI,OAAIA,EAAKkD,SAAOG,KAAK,OAExIrD,EAAKsD,SACF,uBAAGT,UAAU,qBAAqB7C,EAAKsD,eClCxD,SAASC,EAAU5B,GAAQ,IACjC6B,EAAqB7B,EAArB6B,KAEDC,EAFsB9B,EAAf+B,YAEaF,GAEpBG,EAA4B,aAATH,EAEvB,OACI,yBAAKX,UAAU,kBACX,kBAAC,IAAD,CAAWe,YAAaJ,IACnB,SAACjB,EAAUC,GAAX,OACG,yCAASD,EAASsB,eAAlB,CAAkCpB,IAAKF,EAASG,WAC5C,yBAAKM,MAAO,CAACc,WAAY,QAASC,OAAQ,OAAQC,UAAW,WACzD,yBAAKnB,UAAU,MAAMG,MAAO,CAACiB,UAAWN,GAAoB,SACvDF,EAAM5D,KAAI,SAACG,EAAMkE,GAAP,OACP,kBAAC,EAAD,CAAMC,IAAKX,EAAOxD,EAAKqC,GAAIrC,KAAMA,EAAM4B,MAAOsC,OAEjD3B,EAAS6B,mB,qECtBpCC,EAAS,CACXC,WAAY,CACR,oBACA,6BACA,oBACA,kDACA,mCACA,iBAEJC,SAAU,CACN,mBACA,QACA,wBACA,+BACA,aACA,uCACA,mBACA,yCACA,sBACA,6BACA,0BACA,+BACA,uBACA,mBAEJC,QAAS,CACL,YACA,oBACA,4BACA,gCACA,2BACA,WAEJnD,MAAO,CACH,uCACA,oCACA,OACA,OACA,SACA,KACA,QACA,MACA,OACA,OACA,UACA,eACA,aACA,4BACA,UACA,qBACA,wBACA,yCACA,kCACA,cACA,QACA,4BACA,YACA,OACA,wBACA,MACA,UACA,UACA,iCAID,SAAeoD,EAAtB,kC,4CAAO,WAA8BxC,GAA9B,SAAAyC,EAAA,yDACCL,EAAOxC,eAAeI,GADvB,sBAEO,IAAI0C,MAAM,wBAA0B1C,GAF3C,gCAIIoC,EAAOpC,IAJX,4C,sBC7DA,IAAM2C,EAAS,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAUrI,SAASC,EAAaC,EAAKC,GACvB,OAAOD,EAAIE,UAAYD,EAG3B,SAASE,EAAcH,EAAKI,GACxB,IAAIA,EAAM3D,OACN,MAAM,IAAIoD,MAAM,eAEpB,OAAOO,EAAMC,KAAKC,IAAIN,EAAIO,SAAWH,EAAM3D,QAG/C,SAAS+D,EAAaR,EAAKI,GAAqB,IAAD,uBAAVK,EAAU,iCAAVA,EAAU,kBAC3CL,EAAMM,OAAN,MAAAN,EAAK,CAAQC,KAAKC,IAAIN,EAAIO,UAAYH,EAAM3D,OAAS,GAAI,GAApD,OAA0DgE,IAGnE,SAASE,EAAWX,EAAKY,EAAOC,GAC5B,IAAIC,EAAa,IAAIC,MAAMH,EAAQZ,EAAIE,WAAaW,EAAMD,IAAQI,eAClE,OAAO,IAAID,KAAKD,G,SAGLG,E,8EAAf,WAAsBC,GAAtB,SAAAtB,EAAA,+EACW,IAAIuB,SAAS,SAACC,EAASC,GAC1B,OAAOC,IAAKC,MAAML,EAAK,CACnBM,UAAU,EACVC,QAAQ,EACRC,gBAAgB,EAChBC,SAJmB,SAIVC,GACLR,EAAQQ,EAAOC,aAP/B,4C,sBAaA,IAAIC,EAAYC,IAAW,UAEvBC,EAAqBb,QAAQc,IAAI,CACjChB,EAAO,oBACFiB,KADL,uCACU,WAAMC,GAAN,mBAAAvC,EAAA,sEAC4BD,EAAe,cAD3C,cACEyC,EADF,gBAE0BzC,EAAe,YAFzC,cAEE0C,EAFF,gBAGyB1C,EAAe,WAHxC,cAGE2C,EAHF,yBAIKH,EAAKpH,KAAI,SAACwH,EAAKnD,GAClB,IAAI7D,EAAS,CACT4B,KAAM,SAENiB,MAAOmE,EAAIC,OACXhE,QAAQ,IAAD,OAAM2B,EAAc2B,EAAWM,GAA/B,KACP5F,KAAM,IAAIuE,KAAKwB,EAAIE,KAAMF,EAAIG,MAAQ,EAAGH,EAAII,KAC5CnH,MAAO,aACP8C,YAAa,UACbtB,gBARS,WAQU,IAAD,OACd,OAAG4F,KAAKvE,cAGkB,UAAlBuE,KAAKzH,IAAIuD,MAAmC,eAAfkE,KAAKpH,OACnCoH,KAAKzH,IAAIyD,YAA8B,UAAlBgE,KAAKzH,IAAIuD,KAAmB,WAAa,SAC5DmE,MAAK,SAAA3H,GAAI,OAAIA,EAAK4H,aAAe5H,EAAK4H,YAAY,QAE/DA,YAhBS,SAgBG5H,GACR,OAAQ0H,KAAKvE,aAA6B,UAAdnD,EAAKiC,MAErC4F,UAnBS,SAmBC7H,GACN0H,KAAKpE,QAAU2B,EAAc4B,IAAWa,KAAKrF,IAAK+E,GAClDM,KAAKvE,YAAY5B,OAAS,GAE9BuG,OAvBS,WAuBC,IAAD,OACa,eAAfJ,KAAKpH,OACDoH,KAAKzH,IAAIwD,MAAMkE,MAAK,SAAA3H,GAAI,MAAkB,SAAdA,EAAKiC,MAAoB,CAAC,QAAS,SAAS8F,SAAS/H,EAAKiC,QAAUjC,EAAKsB,MAAQ,EAAKA,SACjHoG,KAAKM,mBAIjBA,gBA9BS,WA+BLN,KAAKpH,MAAQ,WACboH,KAAKpE,QAAL,WAAmB2B,EAAc4B,IAAWa,KAAKrF,IAAK8E,GAAtD,OAMR,OAHGtC,EAAa+B,EAAW,KACvBvG,EAAO2H,kBAEJ3H,MA3CT,4CADV,yDAiDE4H,EAAoBhC,QAAQc,IAAI,CAYlChB,EAAO,sBACFiB,MAAK,SAAAC,GAAI,OAAIA,EAAKpH,KAAI,SAACwH,EAAKnD,GACzB,MAAO,CACHjC,KAAM,QAENiB,MAAOmE,EAAInE,MACX5B,KAAM,IAAIuE,KAAKwB,EAAIE,KAAMF,EAAIG,MAAQ,EAAGH,EAAII,KAC5CS,YAAY,SAGxBnC,EAAO,kBACFiB,MAAK,SAAAC,GAAI,OAAIA,EAAKpH,KAAI,SAACwH,EAAKnD,GACzB,MAAO,CACHjC,KAAM,QAENiB,MAAOmE,EAAIc,KACX7E,QAAS+D,EAAIC,OACbhG,KAAM,IAAIuE,KAAKwB,EAAIE,KAAMF,EAAIG,MAAQ,EAAGH,EAAII,KAC5CnH,MAAO,QACP4H,YAAY,WAIvBlB,MAAK,SAAAoB,GAAK,OAAIA,EAAMC,UACpBrB,MAAK,SAAAvD,GAAK,OAjIM6E,EAiIa,SAAAtI,GAAI,OAAIA,EAAKsB,KAAKiH,eAAzB9E,EAhIb+E,QAAO,SAACC,EAAGC,GACjB,IAAIvE,EAAMmE,EAAMI,GAEhB,OADCD,EAAEtE,GAAOsE,EAAEtE,IAAQ,IAAIwE,KAAKD,GACtBD,IACR,IALP,IAAqBH,KAmIfM,EAAmB7C,EAAO,sBAC3BiB,MAAK,SAAA6B,GAAK,OAAIA,EAAMhJ,KAAI,SAACwH,EAAKnD,GAC3B,IAAI4E,EAAWzB,EAAI0B,KAAKC,cAAcjB,SAAS,QAC3CkB,EAAY5B,EAAI0B,KAAKC,cAAcjB,SAAS,SAC5CmB,EAAY7B,EAAI0B,KAAKC,cAAcjB,SAAS,SAChD,MAAO,CACH9F,KAAM,OAENiB,MAAOmE,EAAI7D,KACXF,QAAS+D,EAAI0B,KAAKI,cAAcC,QAAQ,IAAK,IAC7C9H,KAAM+F,EAAIgC,OAAOF,cACjB7I,MAAO2I,EAAY,QAAU,UAC7BK,YAPG,WAQC,OAAGL,GACSvB,KAAKvE,aAAeuE,KAAKvE,YAAY5B,OAAS,EAEjC,UAAlBmG,KAAKzH,IAAIuD,OAAqBkE,KAAKvE,aAE9CyE,YAbG,YAakB,IAAR3F,EAAO,EAAPA,KACT,MAAO,sBACCgH,GAAaH,EAAW,CAAC,OAAQ,UAAY,IAD9C,YAECI,GAAaJ,EAAW,CAAC,QAAU,KACtCf,SAAS9F,IAElB4F,UAnBG,SAmBO7H,GACN,IAAIA,EAAKkI,WAAY,CAEjB,IAAIlH,EAAW,CAEXiB,KAAM,WACNhB,UAAWjB,EAAKiC,KAChBiB,MAAOlD,EAAKkD,MACZI,QAAS,WACTtB,KAAMhC,EAAKuJ,cAEX9F,EAAK,YAAOiE,KAAKzH,IAAIyD,YAAYgE,KAAKzH,IAAIuD,OAC9CC,EAAM+B,OAAO/B,EAAM+F,QAAQ9B,MAAQ,EAAG,EAAG1G,GACzC0G,KAAKzH,IAAIwJ,eAAe/B,KAAKzH,IAAIuD,KAAMC,YAOrDiG,EAAQ,CAAC,SAAU,OAAQ,OAAQ,OAAQ,SAAU,QAAS,UAAW,OAAQ,UAAU7J,KAAI,SAAA2D,GAAI,MAAK,CAC1GvB,KAAM,OACNiB,MAAOM,EACPlD,MAAO,OACP4H,YAAY,MAGVyB,EAAS,CAAC,SAAU,QAAS,QAAS,OAAQ,OAAQ,SAAS9J,KAAI,SAAA2D,GAAI,MAAK,CAC9EvB,KAAM,QACNiB,MAAOM,EAAO,SACdlD,MAAO,QACP4H,YAAY,M,4CAGT,WAA+B5G,GAA/B,qBAAAoD,EAAA,sEACgBuD,EADhB,eACmC3G,EAAKiH,cAAvCqB,EADD,sDAGQ,IAHR,UAKChE,EAAatE,EAAKwE,iBAClBrC,EAAQmG,EAAMlK,QAAO,SAAAM,GAAI,OAAIA,EAAKsB,KAAKwE,iBAAmBF,MAErDrE,OARN,oBASKuD,EAAM+B,IAAWjB,IAEjBtE,KAAU,IAAIuE,KAAK,KAAM,EAAQ,IAXtC,iBAYKP,EAAaR,EAAKrB,EAAO,CACrBxB,KAAM,SACNiB,MAAO,YACP5B,OACAgC,QAAS,iBACThD,MAAO,YACR,CACC2B,KAAM,SACNiB,MAAO,cACP5B,OACAgC,QAAS,mBACThD,MAAO,aAvBhB,2BA0B4B,IAAnBgB,EAAKuI,UA1Bd,wBA2BKpG,EAAMlC,OAAS,EA3BpB,KA4BKkC,EA5BL,UA4ByBqG,GAAgBhF,EAAKxD,GA5B9C,yBA4BWyI,QA5BX,4CA8BSlF,EAAaC,EAAK,IA9B3B,6BA+BKQ,EA/BL,KA+BkBR,EA/BlB,KA+BuBrB,EA/BvB,UA+BoCuG,EAAalF,EAAKxD,GA/BtD,yEAiCSuD,EAAaC,EAAK,IAjC3B,6BAkCKQ,EAlCL,KAkCkBR,EAlClB,KAkCuBrB,EAlCvB,UAkCoCwG,EAAWnF,EAAKxD,GAlCpD,2EAoCSuD,EAAaC,EAAK,IApC3B,8BAqCKQ,EArCL,MAqCkBR,EArClB,MAqCuBrB,EArCvB,UAqCoCyG,EAAWpF,EAAKxD,GArCpD,mFAwCImC,GAxCJ,6C,+BA2CQyG,E,gFAAf,WAA0BpF,EAAKxD,GAA/B,SAAAoD,EAAA,kEACWO,EADX,KACyBH,EADzB,SACoC8D,EADpC,6G,+BAIeoB,E,gFAAf,WAA4BlF,EAAKxD,GAAjC,iBAAAoD,EAAA,kEACiBO,EADjB,KAC+BH,EAD/B,SAC0CgC,EAD1C,+BACqE,SAAAzG,GAAM,OAAKA,EAAOiB,MAAQA,GAAvF6I,GADR,mBAC8DzK,OAD9D,MAIQW,EADD8J,EAAO5I,OACG0D,EAAcH,EAAKqF,GAGnB,CACLlI,KAAM,SACNiB,MAAO,SACP5C,MAAO,YAVnB,iCAcWD,EAdX,CAeQiB,UAfR,4C,+BAmBe2I,E,gFAAf,WAA0BnF,EAAKxD,GAA/B,SAAAoD,EAAA,+EACWG,EAAaC,EAAK,IACnBG,EAAcH,EAAK4E,GACnBzE,EAAcH,EAAK6E,IAH7B,4C,+BAMeG,G,mFAAf,WAA+BhF,EAAKxD,GAApC,IAEa8I,EAFb,WAAA1F,EAAA,6DAEa0F,EAFb,SAEuB9I,GAAO,IAAD,EACF,CAACA,EAAK+I,WAAa,EAAG/I,EAAKuI,WAAzCrC,EADgB,KAEjB8C,EAAS,CAAC,GAAI,YAAa,WAAY,SAAU,QAAS,SAAU,SAAU,SAAU,MAAO,QAAS,QAAS,UAAW,cAAe,aAE/I,OAJqB,KAGN,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAC7C9C,GAAU8C,EAAO9C,EAAQ,GAAK8C,EAAO9C,IAG5D+C,EAAW1D,MATnB,kBAUW,CACH5E,KAAM,SACNiB,MAAOkH,EAAU9I,GAAQ,cAEzBhB,MAAO,QACPiJ,aAAchJ,KACd+I,YANG,WAOC,MAAyB,aAAlB5B,KAAKzH,IAAIuD,MAEpBgH,OATG,SASIC,GAAQ,IAAD,OACV/C,KAAKgD,aAAeD,EACjB/C,KAAKgD,YAAc,MAClBC,GAAYJ,EAAUjJ,GAAM0F,MAAK,SAAAhH,GAC7B,EAAKC,IAAIwJ,eAAe,WAAxB,CAAqCzJ,GAArC,mBAA8C,EAAKC,IAAIyD,YAAYkH,eAEvElD,KAAKmD,WACFnD,KAAKmD,SAAW,IACfnD,KAAKmD,SAAW,EAChBnD,KAAKgD,YAAc,KAI/BA,YAAa,EACbG,SAAU,IAjClB,4C,+BAqCeF,G,mFAAf,WAA2B7F,EAAKxD,GAAhC,eAAAoD,EAAA,6DAE8B,KADtBoG,EAAWrF,EAAWX,EAAK,IAAIe,KAAK,KAAM,EAAG,GAAI,IAAIA,KAAK,KAAM,EAAG,KAC3DgE,WACRiB,EAASC,QAAQ,GAHzB,KAOe9F,EAPf,KAO6BH,EAP7B,SAOwCL,EAAe,SAPvD,wDAQcqG,EARd,gBAYY,MAAsB,WAAfpD,KAAKpH,QAAuBoH,KAAKpG,QAAUoG,KAAKzH,IAAIqB,MAZvE,gBAcuB,IAAD,OACV,MAAsB,WAAfoG,KAAKpH,QACPoH,KAAKzH,IAAIwD,MAAMkE,MAAK,SAAA3H,GAAI,MAAkB,UAAdA,EAAKiC,OAAqBjC,EAAKsB,QAAU,EAAKrB,IAAIqB,SAhB/F,cAkBoBtB,GACR,MAAsB,WAAf0H,KAAKpH,QACO,UAAdN,EAAKiC,OAAqByF,KAAKpG,QAAUtB,EAAKsB,MAC9B,UAAdtB,EAAKiC,OArBxB,cAwBkBjC,GACN0H,KAAKpH,MAAQ,KACboH,KAAKvE,YAAY5B,OAAS,GA1BtC,mBAMQU,KAAM,QACNiB,MAPR,KAQQ5B,KARR,KASQhB,MAAO,SACP8C,YAAa,UACbtB,gBAXR,KAcQwH,YAdR,KAkBQ1B,YAlBR,KAwBQC,UAxBR,oD,sBCtSA,IAqBMmD,GAAc,GAEpBC,aAAY,WACR,IAAI,IAAI/G,EAAI,EAAGA,EAAI8G,GAAYzJ,OAAQ2C,IACnC8G,GAAY9G,GAAGsG,OAHH,MAMjBU,KAEH,IAAIC,GAAuB,KC7BPC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,mBFqCD,WACX,IAAIC,EAAM,IAAI9F,KADY,EAGkB+F,mBAAS,MAH3B,mBAGrBC,EAHqB,KAGJC,EAHI,OAKJF,mBAASD,EAAIpD,eALT,mBAKrBhB,EALqB,KAKfwE,EALe,OAMFH,mBAASD,EAAItB,YANX,mBAMrB7C,EANqB,KAMdwE,EANc,OAONJ,mBAASD,EAAI9B,WAPP,mBAOrBpC,EAPqB,KAOhBwE,EAPgB,OASQL,mBAAS,MATjB,mBASrBM,EATqB,KASTC,EATS,OAUgBP,mBAAS,IAVzB,mBAUrBQ,EAVqB,KAULC,EAVK,KAYtBC,EAAa,IAAIzG,KAAK0B,EAAMC,EAAOC,GACnC8E,EAAmBD,EAAWxG,eAE/BsG,EAAevK,eAAe0K,GAC7BL,EAAaE,EAAeG,GAEvBL,GDuIN,SAAP,kCCtIQM,CAAgBF,GACXtF,MAAK,SAAAvD,GAAK,OAAI0I,EAAc1I,MApBX,MAuBUmI,mBAAS,CACzCa,MAAO,GACP7B,SAAU,CACN,CACIvI,GAAI,WACJJ,KAAM,SACNiB,MAAO,WACP5B,KAAMqK,EACN3J,KAAM0K,KACNnD,aAAcnI,KACdkC,QAAS,gBACThD,MAAO,eAlCO,mBAuBrBoD,EAvBqB,KAuBRiJ,EAvBQ,KAsCvBT,IACCxI,EAAY+I,MAAQP,GAGxB,IAAIU,EAAW,GAEf5B,GAAYzJ,OAAS,EACrBhC,OAAOsN,QAAQnJ,GAAaoJ,SAAQ,YAAoB,IAAD,mBAAjBtJ,EAAiB,KAAXC,EAAW,KAC/CxD,EAAM,CACNqB,KAAMgL,EACN9I,OACAC,QACAC,cACAqJ,WALM,SAKK5I,GACP,OAAOuD,KAAKjE,MAAM5D,KAAI,SAAAG,GAAI,OACtBA,EAAK6B,eAAesC,GACQ,oBAAdnE,EAAKmE,GAAsBnE,EAAKmE,GAAKlE,GAAOD,EAAKmE,QACzD6I,MAEdC,SAXM,SAWG9I,GACL,OAAOuD,KAAKqF,WAAW5I,GAAKwD,MAAK,SAAAjD,GAAC,OAAIA,MAE1C+E,eAdM,SAcSjG,EAAMC,GACjBC,EAAYF,GAAQC,EAGR,UAATD,GACC6I,EAAkB,eACXD,EADU,eAEZG,EAAmB9I,KAG5BkJ,EAAe,eAAIjJ,MAG3BkJ,EAASpJ,GAAQvD,EACjBwD,EAAMqJ,SAAQ,SAAA9M,GACNA,EAAKqC,KACLrC,EAAKqC,GAAK6K,eAEdlN,EAAKC,IAAMA,EACRD,EAAK8H,QACJ9H,EAAK8H,SAEN9H,EAAKwK,QACJQ,GAAYrC,KAAK3I,MAIzB,IAAImN,EAAQ,YAAO1J,GACf2J,EAAe,YAAO3J,GAC1B0J,EAASL,SAAQ,SAAA9M,GACVA,EAAK4H,aACJwF,EAAgBN,SAAQ,SAACO,EAAOnJ,GAC5B,GAAImJ,GAGDrN,IAASqN,GAASrN,EAAK4H,YAAYyF,GAAQ,CAC1CD,EAAgBlJ,GAAK,KACrB,IAAItC,EAAQ6B,EAAM+F,QAAQ6D,IACZ,IAAXzL,GACC6B,EAAM+B,OAAO5D,EAAO,GAExB3B,EAAIwJ,eAAejG,EAAMC,IAExBzD,EAAKmD,YAAcnD,EAAKmD,aAAe,IAAIwF,KAAK0E,GAC9CrN,EAAK6B,eAAe,cACnB7B,EAAK6H,UAAUwF,UAOnCpN,EAAIC,OAASD,EAAIgN,SAAS,kBAhHJ,IAgLtBK,EAAU,CACV,CAAC9F,EAAOwE,EAAU,EAAG,GAAIpH,EAAO4C,GAAO2B,cAAcoE,MAAM,EAAG,GAAIhG,EAHtC,MAI5B,CAACE,EAAKwE,EAAQ,EAAG,IAAIpG,KAAK0B,EAAMC,EAAO,GAAGqC,UAAWpC,EAAI+F,WAAWC,SAAS,EAAG,KAAMlG,EAJ1D,MAK5B,CAACA,EAAMwE,EALe,KAAM,KAKMxE,IAGtC,SAASmG,EAAUC,GACf,SAASC,EAAUC,GACfF,EAAEG,iBACF,IAAIlM,EAAQuD,KAAK4I,IAAI,EAAG5I,KAAK6I,IAAIV,EAAQ/L,OAAS,EAAG0M,SAASN,EAAEO,OAAO7L,GAAGkL,OAAO,IAAMM,IACnFM,EAAUC,SAASC,eAAeV,EAAEO,OAAO7L,GAAGkL,MAAM,GAAI,GAAK3L,GAC9DuM,GACCA,EAAQG,QAIC,KAAdX,EAAEY,QACDX,GAAW,GAEO,KAAdD,EAAEY,QACNX,EAAU,GAGQ,KAAdD,EAAEY,SAAgC,KAAdZ,EAAEY,UAC1BzC,EAAmB,cAA8B,KAAd6B,EAAEY,QAAiB,OAAS,UAC/DC,aAAarD,IACbA,GAAuBsD,YAAW,WAC9B3C,EAAmB,QACpB,MAIX,OACI,6BACI,yBAAKjJ,UAAU,YAAYG,MAAO,CAACc,WAAY,UAC3C,kBAAC4K,EAAA,EAAD,CAAK7L,UAAU,eACX,kBAAC8L,EAAA,EAAD,CAAKC,GAAI,GACL,wBAAI/L,UAAU,yCAAd,YAEJ,kBAAC8L,EAAA,EAAD,CAAKC,GAAI,GACL,yBAAK/L,UAAWC,IAAW+I,IACvB,yBAAKhJ,UAAU,cACVyK,EAAQzN,KAAI,WAAsCqE,GAAtC,uBAAE2K,EAAF,KAAOC,EAAP,KAAYd,EAAZ,KAAiBD,EAAjB,KAAsBgB,EAAtB,KAA6BC,EAA7B,YACT,yBAAK7K,IAAKD,GACN,kBAACwK,EAAA,EAAD,CAAK7L,UAAU,wBACX,kBAAC8L,EAAA,EAAD,CAAKM,GAAI,GACL,wBAAIpM,UAAU,aAAakM,IAE/B,kBAACJ,EAAA,EAAD,CAAKM,GAAI,GACL,2BACIhN,KAAK,QACLI,GAAI,UAAY6B,EAChBrB,UAAU,eACVmL,IAAKA,EACLD,IAAKA,EACL/K,MAAO,CAACkM,QAASF,EAAS,GAAK,GAC/BG,MAAOhK,KAAK6I,IAAID,EAAK5I,KAAK4I,IAAIC,EAAKa,IACnCO,SAAU,SAAAzB,GACNxB,EAAc,MACd2C,EAAInB,EAAEO,OAAOiB,QAEjBE,YAAa,kBAAMvD,EAAmB,mBACtCwD,UAAW,kBAAMxD,EAAmB,OACpC4B,UAAWA,EACX6B,OAAQ,SAAA5B,GAAC,OAAIA,EAAE6B,eAAiB7B,EAAEO,OAAOI,oBASzE,kBAACK,EAAA,EAAD,CAAKC,GAAI,GACL,wBAAI/L,UAAU,qCAAd,aAIZ,kBAAC,IAAD,CAAiB4M,UA3IzB,SAAmB/I,GAAS,IACnBgJ,EAAuBhJ,EAAvBgJ,OAAQC,EAAejJ,EAAfiJ,YAEb,GAAIA,EAAJ,CAIA,GAAGD,EAAO9L,cAAgB+L,EAAY/L,YAClCF,EAAYiM,EAAY/L,aA3JpB,SAACgM,EAAMC,EAAYC,GAC/B,IAAMpJ,EAASqJ,MAAMC,KAAKJ,GADkB,EAE1BlJ,EAAOlB,OAAOqK,EAAY,GAArCI,EAFqC,oBAI5C,OADAvJ,EAAOlB,OAAOsK,EAAU,EAAGG,GACpBvJ,EAuJwCwJ,CACnCxM,EAAYiM,EAAY/L,aACxB8L,EAAO9N,MACP+N,EAAY/N,YAID8B,EAAYgM,EAAO9L,aAAa8L,EAAO9N,OAC7C3B,IAAM2M,EAAS+C,EAAY/L,aAEpCrE,OAAO4Q,OAAOzM,EA9Jb,SAACgM,EAAQC,EAAaS,EAAiBC,GAChD,IAAMC,EAAcP,MAAMC,KAAKN,GACzBa,EAAYR,MAAMC,KAAKL,GAF4C,EAGvDW,EAAY9K,OAAO4K,EAAgBxO,MAAO,GAArDqO,EAHkE,oBAKzEM,EAAU/K,OAAO6K,EAAqBzO,MAAO,EAAGqO,GAEhD,IAAMvJ,EAAS,GAIf,OAHAA,EAAO0J,EAAgBxM,aAAe0M,EACtC5J,EAAO2J,EAAqBzM,aAAe2M,EAEpC7J,EAmJ4B8J,CACvB9M,EAAYgM,EAAO9L,aACnBF,EAAYiM,EAAY/L,aACxB8L,EACAC,IA2BkB,UAAvBD,EAAO9L,aAAuD,UAA5B+L,EAAY/L,aAC7CyI,EAAkB,eACXD,EADU,eAEZG,EAAmB7I,EAAY+I,SAIxCE,EAAe,eAAIjJ,OAoFX,yBAAKb,UAAWC,IAAW+I,IACvB,kBAAC6C,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAK8B,GAAI,GACJ/M,EAAY+I,OAASH,EAAW/D,eApFzB,MAqFJ,kBAAChF,EAAD,CAAWC,KAAK,QAAQE,YAAaA,KAG7C,kBAACiL,EAAA,EAAD,CAAK8B,GAAI,GACL,kBAAClN,EAAD,CAAWC,KAAK,WAAWE,YAAaA,WE5SpD,MAAQ0K,SAASC,eAAe,SD6H1C,kBAAmBqC,WACrBA,UAAUC,cAAcC,MACrB5J,MAAK,SAAA6J,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAM1N,c","file":"static/js/main.a58c7798.chunk.js","sourcesContent":["import * as reactIcons from 'react-icons/all';\r\nimport {\r\n    FaBone,\r\n    GiBestialFangs, GiDeathJuice,\r\n    GiDinosaurBones,\r\n    GiLockedBox,\r\n    GiMusicSpell,\r\n    GiNewspaper,\r\n    GiOpenedFoodCan,\r\n    GiPawPrint,\r\n    GiPerson,\r\n    GiSkeleton,\r\n    GiSkullMask, GiWaterBottle\r\n} from 'react-icons/all';\r\n\r\nlet CURSE_ICONS = Object.keys(reactIcons)\r\n    .filter(k => k.startsWith('GiAbstract'))\r\n    .map(k => reactIcons[k]);\r\n\r\nlet ICON_MAP = {\r\n    event(item) {\r\n        if(item.ctx.locked) {\r\n            return GiLockedBox;\r\n        }\r\n        return GiNewspaper;\r\n    },\r\n    person(item) {\r\n        if(item.emote === 'witch') {\r\n            return GiSkullMask;\r\n        }\r\n        return GiPerson;\r\n    },\r\n    food() {\r\n        return GiOpenedFoodCan;\r\n    },\r\n    juice() {\r\n        return GiWaterBottle;\r\n    },\r\n    dino(item) {\r\n        return item.emote === 'angry' ? GiBestialFangs : GiPawPrint;\r\n    },\r\n    skeleton(item) {\r\n        return item.aliveType === 'dino' ? GiDinosaurBones :\r\n            item.aliveType === 'person' ? GiSkeleton\r\n                : FaBone;\r\n    },\r\n    curse(item) {\r\n        return CURSE_ICONS[+item.date % CURSE_ICONS.length];\r\n    },\r\n    music() {\r\n        return GiMusicSpell;\r\n    }\r\n};\r\n\r\nexport function findItemIconSync(item) {\r\n    return item.icon || (ICON_MAP.hasOwnProperty(item.type) ? ICON_MAP[item.type](item) : null);\r\n}","import React from 'react';\r\n\r\nimport './Item.scss';\r\nimport {Draggable} from 'react-beautiful-dnd';\r\nimport classNames from 'classnames/bind';\r\nimport {findItemIconSync} from '../services/icon-service';\r\n\r\nexport default function Item(props) {\r\n    let {item, index} = props;\r\n\r\n    let {locked} = item.ctx;\r\n\r\n    if(item.hasOwnProperty('preventSelfDrag') && item.preventSelfDrag()) {\r\n        locked = true;\r\n    }\r\n\r\n    let Icon = findItemIconSync(item);\r\n\r\n    return (\r\n        <Draggable draggableId={String(item.id)}\r\n                   index={index}\r\n                   isDragDisabled={locked}>\r\n            {(provided, snapshot) =>\r\n                <div\r\n                    ref={provided.innerRef}\r\n                    {...provided.draggableProps}\r\n                    {...provided.dragHandleProps}>\r\n                    <div className=\"py-1\">\r\n                        <div\r\n                            className={classNames('inventory-item noselect px-2 py-3 rounded-right rounded-bottom', item.emote, locked && 'locked')}>\r\n                            <h6 className=\"item-date text-white-50 float-right ml-3 mt-1\">{typeof item.date == 'string' ? item.date : item.date && item.date.toLocaleDateString()}</h6>\r\n                            <h4 className=\"text-uppercase mb-1\">\r\n                                {Icon && <Icon className=\"mr-2\" style={{marginTop: '-.25em'}}/>}\r\n                                {item.title}\r\n                            </h4>\r\n                            {item.hasConsumed && (\r\n                                <p className=\"text-white text-uppercase mb-1 float-right\">{item.consumeVerb || 'Ate'} {item.hasConsumed.map(item => item.title).join(', ')}</p>\r\n                            )}\r\n                            {item.message && (\r\n                                <p className=\"item-message mb-1\">{item.message}</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </Draggable>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\nimport Item from './Item';\r\nimport {Droppable} from 'react-beautiful-dnd';\r\n\r\nexport default function Inventory(props) {\r\n    let {name, inventories} = props;\r\n\r\n    let items = inventories[name];\r\n\r\n    let alwaysScrollable = name === 'backpack';\r\n\r\n    return (\r\n        <div className=\"inventory pt-3\">\r\n            <Droppable droppableId={name}>\r\n                {(provided, snapshot) => (\r\n                    <div {...provided.droppableProps} ref={provided.innerRef}>\r\n                        <div style={{background: '#0002', height: '60vh', overflowY: 'scroll'}}>\r\n                            <div className=\"p-3\" style={{minHeight: alwaysScrollable && '70vh'}}>\r\n                                {items.map((item, i) =>\r\n                                    <Item key={name + item.id} item={item} index={i}/>\r\n                                )}\r\n                                {provided.placeholder}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Droppable>\r\n        </div>\r\n    );\r\n};\r\n","const DIALOG = {\r\n    suspicious: [\r\n        'Yeah, sure, sure.',\r\n        'Time traveler? I doubt it.',\r\n        'Okay then, McFly.',\r\n        'Seems like the paparazzi are getting desperate.',\r\n        'I have no reason to believe you.',\r\n        'Nice costume.',\r\n    ],\r\n    friendly: [\r\n        'What the heck...',\r\n        'How??',\r\n        'How is this possible?',\r\n        'Do you have flying cars yet?',\r\n        'It\\'s true!',\r\n        'I\\'m just not going to question this.',\r\n        'Is this a dream?',\r\n        'Wow. Okay. Time traveler. Fair enough.',\r\n        'I can\\'t believe it!',\r\n        'Do you have an extra seat?',\r\n        'Can you bring me along?',\r\n        'Please let me come with you.',\r\n        'Mind if I tag along?',\r\n        'It\\'s a miracle!',\r\n    ],\r\n    sedated: [\r\n        'Zzzzzz...',\r\n        'I\\'mma take a nap.',\r\n        'What did you put in this?',\r\n        'I don\\'t think that was juice.',\r\n        'Something isn\\'t right...',\r\n        'Whoa...',\r\n    ],\r\n    curse: [\r\n        'YOU HAVE TRESPASSED ON SACRED GROUND',\r\n        'TIME TRAVELERS ARE UNWELCOME HERE',\r\n        'BURN',\r\n        'BURN',\r\n        'BEGONE',\r\n        'GO',\r\n        'LEAVE',\r\n        'RUN',\r\n        'AWAY',\r\n        'FLEE',\r\n        'HEATHEN',\r\n        'TIME-CRAWLER',\r\n        'DESECRATOR',\r\n        'FOE OF THE TEMPORAL DEMON',\r\n        'DEFILER',\r\n        'YOU DID NOT LISTEN',\r\n        'BLOOD WILL BE SPILLED',\r\n        'WE DO NOT TAKE KINDLY TO YOUR PRESENCE',\r\n        'LEAVE WHILE YOU HAVE THE CHANCE',\r\n        'TIME-WEEVIL',\r\n        'FIEND',\r\n        'WE SHALL NOT BE CONTAINED',\r\n        'SACRIFICE',\r\n        'AWAY',\r\n        'THE BAT WILL FIND YOU',\r\n        'OUT',\r\n        'TOO FAR',\r\n        'REJOICE',\r\n        'YOUR KIND HAVE NO PLACE HERE',\r\n    ],\r\n};\r\n\r\nexport async function findAllDialogs(type) {\r\n    if(!DIALOG.hasOwnProperty(type)) {\r\n        throw new Error('Unknown dialog type: ' + type);\r\n    }\r\n    return DIALOG[type];\r\n}","import Papa from 'papaparse';\r\nimport seedrandom from 'seedrandom';\r\nimport {findAllDialogs} from './dialog-service';\r\nimport {GiSkullMask} from 'react-icons/all';\r\n\r\nexport const MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n\r\nfunction groupBy(xs, keyFn) {\r\n    return xs.reduce((r, x) => {\r\n        let key = keyFn(x);\r\n        (r[key] = r[key] || []).push(x);\r\n        return r;\r\n    }, {});\r\n}\r\n\r\nfunction randomChance(rng, chance) {\r\n    return rng.double() <= chance;\r\n}\r\n\r\nfunction randomElement(rng, array) {\r\n    if(!array.length) {\r\n        throw new Error('Empty array');\r\n    }\r\n    return array[Math.abs(rng.int32()) % array.length];\r\n}\r\n\r\nfunction randomInsert(rng, array, ...elements) {\r\n    array.splice(Math.abs(rng.int32()) % (array.length + 1), 0, ...elements);\r\n}\r\n\r\nfunction randomDate(rng, start, end) {\r\n    let dateString = new Date(+start + rng.double() * (+end - start)).toDateString();\r\n    return new Date(dateString);\r\n}\r\n\r\nasync function getCSV(url) {\r\n    return new Promise(((resolve, reject) => {\r\n        return Papa.parse(url, {\r\n            download: true,\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete(result) {\r\n                resolve(result.data);\r\n            },\r\n        });\r\n    }));\r\n}\r\n\r\nlet rngPeople = seedrandom('people');\r\n\r\nlet peopleListsPromise = Promise.all([\r\n    getCSV('data/singers.csv')\r\n        .then(async rows => {\r\n            let suspiciousDialogs = await findAllDialogs('suspicious');\r\n            let friendlyDialogs = await findAllDialogs('friendly');\r\n            let sedatedDialogs = await findAllDialogs('sedated');\r\n            return rows.map((row, i) => {\r\n                let person = {\r\n                    type: 'person',\r\n                    // id: 'singer' + i,\r\n                    title: row.singer,\r\n                    message: `\"${randomElement(rngPeople, suspiciousDialogs)}\"`,\r\n                    date: new Date(row.year, row.month - 1, row.day),\r\n                    emote: 'suspicious',\r\n                    consumeVerb: 'Sedated',\r\n                    preventSelfDrag() {\r\n                        if(this.hasConsumed) {\r\n                            return false;\r\n                        }\r\n                        return (this.ctx.name === 'today' && this.emote === 'suspicious')\r\n                            || this.ctx.inventories[this.ctx.name === 'today' ? 'backpack' : 'today']\r\n                                .some(item => item.willConsume && item.willConsume(this));\r\n                    },\r\n                    willConsume(item) {\r\n                        return !this.hasConsumed && item.type === 'juice';\r\n                    },\r\n                    onConsume(item) {\r\n                        this.message = randomElement(seedrandom(this.id), sedatedDialogs);\r\n                        this.hasConsumed.length = 0;\r\n                    },\r\n                    onView() {\r\n                        if(this.emote === 'suspicious') {\r\n                            if(this.ctx.items.some(item => item.type === 'dino' || (['event', 'music'].includes(item.type) && +item.date > +this.date))) {\r\n                                this.convertFriendly();\r\n                            }\r\n                        }\r\n                    },\r\n                    convertFriendly() {\r\n                        this.emote = 'friendly';\r\n                        this.message = `\"${randomElement(seedrandom(this.id), friendlyDialogs)}\"`;\r\n                    }\r\n                };\r\n                if(randomChance(rngPeople, .4)) {\r\n                    person.convertFriendly();\r\n                }\r\n                return person;\r\n            });\r\n        }),\r\n]);\r\n\r\nconst yearGroupsPromise = Promise.all([\r\n    // getCSV('data/books.csv')\r\n    //     .then(rows => rows.map((row, i) => {\r\n    //         return {\r\n    //             type: 'book',\r\n    //             id: 'book' + i,\r\n    //             title: row.title,\r\n    //             message: row.authors,\r\n    //             date: new Date(row.year, row.month - 1, row.day),\r\n    //             emote: 'book',\r\n    //         };\r\n    //     })),\r\n    getCSV('data/headlines.csv')\r\n        .then(rows => rows.map((row, i) => {\r\n            return {\r\n                type: 'event',\r\n                // id: 'event' + i,\r\n                title: row.title,\r\n                date: new Date(row.year, row.month - 1, row.day),\r\n                noSkeleton: true,\r\n            };\r\n        })),\r\n    getCSV('data/songs.csv')\r\n        .then(rows => rows.map((row, i) => {\r\n            return {\r\n                type: 'music',\r\n                // id: 'music' + i,\r\n                title: row.song,\r\n                message: row.singer,\r\n                date: new Date(row.year, row.month - 1, row.day),\r\n                emote: 'music',\r\n                noSkeleton: true,\r\n            };\r\n        })),\r\n])\r\n    .then(parts => parts.flat())\r\n    .then(items => groupBy(items, item => item.date.getFullYear()));\r\n\r\nconst dinosaursPromise = getCSV('data/dinosaurs.csv')\r\n    .then(dinos => dinos.map((row, i) => {\r\n        let omnivore = row.diet.toLowerCase().includes('omni');\r\n        let carnivore = row.diet.toLowerCase().includes('carni');\r\n        let herbivore = row.diet.toLowerCase().includes('herbi');\r\n        return {\r\n            type: 'dino',\r\n            // id: 'dino' + i,\r\n            title: row.name,\r\n            message: row.diet.toUpperCase().replace('?', ''),\r\n            date: row.period.toUpperCase(),\r\n            emote: carnivore ? 'angry' : 'neutral',\r\n            preventDrag() {\r\n                if(carnivore) {\r\n                    return !this.hasConsumed || this.hasConsumed.length < 3;\r\n                }\r\n                return this.ctx.name === 'today' && !this.hasConsumed;\r\n            },\r\n            willConsume({type}) {\r\n                return [\r\n                    ...(carnivore || omnivore ? ['dino', 'person'] : []),\r\n                    ...(herbivore || omnivore ? ['food'] : [])]\r\n                    .includes(type);\r\n            },\r\n            onConsume(item) {\r\n                if(!item.noSkeleton) {\r\n                    // setTimeout(() => {\r\n                    let skeleton = {\r\n                        // id: item.id + 'skeleton',\r\n                        type: 'skeleton',\r\n                        aliveType: item.type,\r\n                        title: item.title,\r\n                        message: 'Skeleton',\r\n                        icon: item.skeletonIcon,\r\n                    };\r\n                    let items = [...this.ctx.inventories[this.ctx.name]];\r\n                    items.splice(items.indexOf(this) + 1, 0, skeleton);\r\n                    this.ctx.applyInventory(this.ctx.name, items);\r\n                    // });\r\n                }\r\n            }\r\n        };\r\n    }));\r\n\r\nconst foods = ['Potato', 'Rice', 'Tofu', 'Corn', 'Carrot', 'Beans', 'Soylent', 'Lard', 'Quinoa'].map(name => ({\r\n    type: 'food',\r\n    title: name,\r\n    emote: 'food',\r\n    noSkeleton: true,\r\n}));\r\n\r\nconst juices = ['Orange', 'Apple', 'Lemon', 'Lime', 'Kiwi', 'Grape'].map(name => ({\r\n    type: 'juice',\r\n    title: name + ' Juice',\r\n    emote: 'juice',\r\n    noSkeleton: true,\r\n}));\r\n\r\nexport async function findItemsByDate(date) {\r\n    let group = (await yearGroupsPromise)[date.getFullYear()];\r\n    if(!group) {\r\n        return [];\r\n    }\r\n    let dateString = date.toDateString();\r\n    let items = group.filter(item => item.date.toDateString() === dateString);\r\n\r\n    if(items.length) {\r\n        let rng = seedrandom(dateString);\r\n\r\n        if(+date === +new Date(2015, 10 - 1, 21)) {\r\n            randomInsert(rng, items, {\r\n                type: 'person',\r\n                title: 'Doc Brown',\r\n                date,\r\n                message: '\"Great Scott!\"',\r\n                emote: 'friendly',\r\n            }, {\r\n                type: 'person',\r\n                title: 'Marty McFly',\r\n                date,\r\n                message: '\"This is heavy.\"',\r\n                emote: 'friendly',\r\n            });\r\n        }\r\n        else if(date.getDate() === 1) {\r\n            items.length = 0;\r\n            items.unshift(await randomTimeWitch(rng, date));\r\n        }\r\n        else if(randomChance(rng, .3)) {\r\n            randomInsert(rng, items, await randomPerson(rng, date));\r\n        }\r\n        else if(randomChance(rng, .3)) {\r\n            randomInsert(rng, items, await randomFood(rng, date));\r\n        }\r\n        else if(randomChance(rng, .3)) {\r\n            randomInsert(rng, items, await randomDino(rng, date));\r\n        }\r\n    }\r\n    return items;\r\n}\r\n\r\nasync function randomDino(rng, date) {\r\n    return randomElement(rng, await dinosaursPromise);\r\n}\r\n\r\nasync function randomPerson(rng, date) {\r\n    let people = randomElement(rng, await peopleListsPromise).filter(person => +person.date >= date);\r\n    let person;\r\n    if(people.length/* && randomChance(rng, .8)*/) {\r\n        person = randomElement(rng, people);\r\n    }\r\n    else {\r\n        person = {\r\n            type: 'person',\r\n            title: 'Gustav',\r\n            emote: 'friendly',\r\n        };\r\n    }\r\n    return {\r\n        ...person,\r\n        date,\r\n    };\r\n}\r\n\r\nasync function randomFood(rng, date) {\r\n    return randomChance(rng, .7)\r\n        ? randomElement(rng, foods)\r\n        : randomElement(rng, juices);\r\n}\r\n\r\nasync function randomTimeWitch(rng, date) {\r\n    // https://coursesweb.net/javascript/zodiac-signs_cs\r\n    function getZodiac(date) {\r\n        let [month, day] = [date.getMonth() + 1, date.getDate()];\r\n        let zodiac = ['', 'Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius', 'Capricorn'];\r\n        let last_day = ['', 19, 18, 20, 20, 21, 21, 22, 22, 21, 22, 21, 20, 19];\r\n        return (day > last_day[month]) ? zodiac[month + 1] : zodiac[month];\r\n    }\r\n\r\n    let rngCurse = seedrandom();\r\n    return {\r\n        type: 'person',\r\n        title: getZodiac(date) + ' Time Witch',\r\n        // message: randomElement(rng, await findAllDialogs('curse')),\r\n        emote: 'witch',\r\n        skeletonIcon: GiSkullMask,\r\n        preventDrag() {\r\n            return this.ctx.name !== 'backpack';\r\n        },\r\n        update(delta) {\r\n            this.attackTimer += delta;\r\n            if(this.attackTimer > 1.2) {\r\n                randomCurse(rngCurse, date).then(item => {\r\n                    this.ctx.applyInventory('backpack', [item, ...this.ctx.inventories.backpack]);\r\n                });\r\n                this.attackCt++;\r\n                if(this.attackCt > 3) {\r\n                    this.attackCt = 0;\r\n                    this.attackTimer = 0;\r\n                }\r\n            }\r\n        },\r\n        attackTimer: 0,\r\n        attackCt: 0,\r\n    };\r\n}\r\n\r\nasync function randomCurse(rng, date) {\r\n    let liftDate = randomDate(rng, new Date(2003, 1, 1), new Date(2020, 1, 1));\r\n    if(liftDate.getDate() === 1) {\r\n        liftDate.setDate(2);\r\n    }\r\n    return {\r\n        type: 'curse',\r\n        title: randomElement(rng, await findAllDialogs('curse')),\r\n        date: liftDate,\r\n        emote: 'cursed',\r\n        consumeVerb: 'Amended',\r\n        preventSelfDrag() {\r\n            return this.emote === 'cursed' && +this.date !== +this.ctx.date;\r\n        },\r\n        preventDrag() {\r\n            return this.emote === 'cursed' &&\r\n                !this.ctx.items.some(item => item.type === 'curse' && +item.date === +this.ctx.date);\r\n        },\r\n        willConsume(item) {\r\n            return this.emote === 'cursed' && (\r\n                (item.type === 'event' && +this.date === +item.date)\r\n                || item.type === 'music'\r\n            );\r\n        },\r\n        onConsume(item) {\r\n            this.emote = null;\r\n            this.hasConsumed.length = 0;\r\n        },\r\n    };\r\n}\r\n","import React, {useState} from 'react';\r\n\r\nimport './App.scss';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport Inventory from './Inventory';\r\nimport classNames from 'classnames/bind';\r\nimport uid from 'uid';\r\nimport {DragDropContext} from 'react-beautiful-dnd';\r\nimport {findItemsByDate, MONTHS} from '../services/item-service';\r\nimport {FaBone, FaDog} from 'react-icons/all';\r\n\r\nconst reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n    return result;\r\n};\r\n\r\nconst move = (source, destination, droppableSource, droppableDestination) => {\r\n    const sourceClone = Array.from(source);\r\n    const destClone = Array.from(destination);\r\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\r\n\r\n    destClone.splice(droppableDestination.index, 0, removed);\r\n\r\n    const result = {};\r\n    result[droppableSource.droppableId] = sourceClone;\r\n    result[droppableDestination.droppableId] = destClone;\r\n\r\n    return result;\r\n};\r\n\r\nconst updateQueue = [];\r\nconst updateDelta = .1;\r\nsetInterval(() => {\r\n    for(let i = 0; i < updateQueue.length; i++) {\r\n        updateQueue[i].update(updateDelta);\r\n    }\r\n    // updateQueue.length = 0;\r\n}, updateDelta * 1000);\r\n\r\nlet keyTimeTravelTimeout = null;\r\n\r\nexport default function App() {\r\n    let now = new Date();\r\n\r\n    let [timeTravelClass, setTimeTravelClass] = useState(null);\r\n\r\n    let [year, setYear] = useState(now.getFullYear());\r\n    let [month, setMonth] = useState(now.getMonth());\r\n    let [day, setDay] = useState(now.getDate());\r\n\r\n    let [todayItems, setTodayItems] = useState(null);\r\n    let [todayOverrides, setTodayOverrides] = useState({});\r\n\r\n    let travelDate = new Date(year, month, day);\r\n    let travelDateString = travelDate.toDateString();\r\n\r\n    if(todayOverrides.hasOwnProperty(travelDateString)) {\r\n        todayItems = todayOverrides[travelDateString];\r\n    }\r\n    else if(!todayItems) {\r\n        findItemsByDate(travelDate)\r\n            .then(items => setTodayItems(items));\r\n    }\r\n\r\n    let [inventories, setInventories] = useState({\r\n        today: [],\r\n        backpack: [\r\n            {\r\n                id: 'stevie-o',\r\n                type: 'person',\r\n                title: 'Stevie-o',\r\n                date: now,\r\n                icon: FaDog,\r\n                skeletonIcon: FaBone,\r\n                message: '\"Bark! Woof!\"',\r\n                emote: 'friendly',\r\n            },\r\n        ]\r\n    });\r\n    if(todayItems) {\r\n        inventories.today = todayItems;\r\n    }\r\n\r\n    let contexts = {};\r\n\r\n    updateQueue.length = 0;\r\n    Object.entries(inventories).forEach(([name, items]) => {\r\n        let ctx = {\r\n            date: travelDate,\r\n            name,\r\n            items,\r\n            inventories,\r\n            queryArray(key) {\r\n                return this.items.map(item =>\r\n                    item.hasOwnProperty(key)\r\n                        ? (typeof item[key] === 'function' ? item[key](ctx) : item[key])\r\n                        : undefined);\r\n            },\r\n            queryAny(key) {\r\n                return this.queryArray(key).some(a => a);\r\n            },\r\n            applyInventory(name, items) {\r\n                inventories[name] = items;\r\n\r\n                // TODO dry\r\n                if(name === 'today') {\r\n                    setTodayOverrides({\r\n                        ...todayOverrides,\r\n                        [travelDateString]: items,\r\n                    });\r\n                }\r\n                setInventories({...inventories});\r\n            },\r\n        };\r\n        contexts[name] = ctx;\r\n        items.forEach(item => {\r\n            if(!item.id) {\r\n                item.id = uid();\r\n            }\r\n            item.ctx = ctx;\r\n            if(item.onView) {\r\n                item.onView();\r\n            }\r\n            if(item.update) {\r\n                updateQueue.push(item);\r\n            }\r\n        });\r\n\r\n        let allItems = [...items];\r\n        let consumableItems = [...items];\r\n        allItems.forEach(item => {\r\n            if(item.willConsume) {\r\n                consumableItems.forEach((other, i) => {\r\n                    if(!other) {\r\n                        return;\r\n                    }\r\n                    if(item !== other && item.willConsume(other)) {\r\n                        consumableItems[i] = null;\r\n                        let index = items.indexOf(other);\r\n                        if(index !== -1) {\r\n                            items.splice(index, 1);\r\n                        }\r\n                        ctx.applyInventory(name, items);\r\n\r\n                        (item.hasConsumed = item.hasConsumed || []).push(other);\r\n                        if(item.hasOwnProperty('onConsume')) {\r\n                            item.onConsume(other);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        ctx.locked = ctx.queryAny('preventDrag');\r\n    });\r\n\r\n    function onDragEnd(result) {\r\n        let {source, destination} = result;\r\n\r\n        if(!destination) {\r\n            return;\r\n        }\r\n\r\n        if(source.droppableId === destination.droppableId) {\r\n            inventories[destination.droppableId] = reorder(\r\n                inventories[destination.droppableId],\r\n                source.index,\r\n                destination.index,\r\n            );\r\n        }\r\n        else {\r\n            let dropItem = inventories[source.droppableId][source.index];\r\n            dropItem.ctx = contexts[destination.droppableId];\r\n\r\n            Object.assign(inventories, move(\r\n                inventories[source.droppableId],\r\n                inventories[destination.droppableId],\r\n                source,\r\n                destination,\r\n            ));\r\n\r\n            // let destItems = [...inventories[destination.droppableId]];\r\n            // destItems.forEach(item => {\r\n            //     // item.ctx = contexts[destination.droppableId];\r\n            //     if(item.willConsume) {\r\n            //         destItems.forEach(other => {\r\n            //             if(item !== other && item.willConsume(other)) {\r\n            //\r\n            //                 let items = inventories[destination.droppableId];\r\n            //                 let index = items.indexOf(other);\r\n            //                 if(index !== -1) {\r\n            //                     items.splice(index, 1);\r\n            //                 }\r\n            //\r\n            //                 (item.hasConsumed = item.hasConsumed || []).push(other);\r\n            //                 if(item.hasOwnProperty('onConsume')) {\r\n            //                     item.onConsume(other);\r\n            //                 }\r\n            //             }\r\n            //         });\r\n            //     }\r\n            // });\r\n        }\r\n\r\n        //TODO dry\r\n        if(source.droppableId === 'today' || destination.droppableId === 'today') {\r\n            setTodayOverrides({\r\n                ...todayOverrides,\r\n                [travelDateString]: inventories.today,\r\n            });\r\n        }\r\n\r\n        setInventories({...inventories});\r\n    }\r\n\r\n    let [minYear, maxYear] = [2003, 2019];\r\n\r\n    let sliders = [\r\n        [month, setMonth, 0, 11, MONTHS[month].toUpperCase().slice(0, 3), year > maxYear],\r\n        [day, setDay, 1, new Date(year, month, 0).getDate(), day.toString().padStart(2, '0'), year > maxYear],\r\n        [year, setYear, minYear, maxYear, year],\r\n    ];\r\n\r\n    function onKeyDown(e) {\r\n        function moveFocus(n) {\r\n            e.preventDefault();\r\n            let index = Math.max(0, Math.min(sliders.length - 1, parseInt(e.target.id.slice(-1)) + n));\r\n            let element = document.getElementById(e.target.id.slice(0, -1) + index);\r\n            if(element) {\r\n                element.focus();\r\n            }\r\n        }\r\n\r\n        if(e.keyCode === 38) {// Up\r\n            moveFocus(-1);\r\n        }\r\n        else if(e.keyCode === 40) {// Down\r\n            moveFocus(1);\r\n        }\r\n\r\n        else if(e.keyCode === 37 || e.keyCode === 39) {// Left || Right\r\n            setTimeTravelClass('time-jump-' + (e.keyCode === 37 ? 'left' : 'right'));\r\n            clearTimeout(keyTimeTravelTimeout);\r\n            keyTimeTravelTimeout = setTimeout(() => {\r\n                setTimeTravelClass(null);\r\n            }, 200);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"pt-3 pb-1\" style={{background: '#0005'}}>\r\n                <Row className=\"text-center\">\r\n                    <Col sm={4}>\r\n                        <h2 className=\"mb-0 text-primary text-left mt-5 ml-4\">Outside</h2>\r\n                    </Col>\r\n                    <Col sm={4}>\r\n                        <div className={classNames(timeTravelClass)}>\r\n                            <div className=\"form-group\">\r\n                                {sliders.map(([get, set, min, max, label, subtle], i) =>\r\n                                    <div key={i}>\r\n                                        <Row className=\"text-right text-info\">\r\n                                            <Col xs={4}>\r\n                                                <h5 className=\"mt-1 pt-2\">{label}</h5>\r\n                                            </Col>\r\n                                            <Col xs={8}>\r\n                                                <input\r\n                                                    type=\"range\"\r\n                                                    id={'slider-' + i}\r\n                                                    className=\"form-control\"\r\n                                                    min={min}\r\n                                                    max={max}\r\n                                                    style={{opacity: subtle ? .2 : 1}}\r\n                                                    value={Math.min(max, Math.max(min, get))}\r\n                                                    onChange={e => {\r\n                                                        setTodayItems(null);\r\n                                                        set(e.target.value);\r\n                                                    }}\r\n                                                    onMouseDown={() => setTimeTravelClass('time-traveling')}\r\n                                                    onMouseUp={() => setTimeTravelClass(null)}\r\n                                                    onKeyDown={onKeyDown}\r\n                                                    onBlur={e => e.relatedTarget || e.target.focus()}\r\n                                                />\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </Col>\r\n                    <Col sm={4}>\r\n                        <h2 className=\"text-primary text-right mt-5 mr-4\">Inside</h2>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n                <div className={classNames(timeTravelClass)}>\r\n                    <Row>\r\n                        <Col md={6}>\r\n                            {inventories.today && travelDate.getFullYear() <= maxYear && (\r\n                                <Inventory name=\"today\" inventories={inventories}/>\r\n                            )}\r\n                        </Col>\r\n                        <Col md={6}>\r\n                            <Inventory name=\"backpack\" inventories={inventories}/>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n            </DragDropContext>\r\n        </div>\r\n    );\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style/index.scss';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}